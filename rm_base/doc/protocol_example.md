# 机器人协议（example）

* 2019.4.1 by  zhenpeng.ge@qq.com

## 1.数据帧定义

16位定长控制数据帧：

| 数据头位（0xff） |   命令位   |    数据位     | 数据尾位（0x0d） |
| :--------------: | :--------: | :-----------: | :--------------: |
|    0（1Byte）    | 1（1Byte） | 2—14 (13Byte) |   15（1Byte）    |

**说明**：帧长**16Byte**

- （1Byte）0：数据帧头位（0xff）
- （1Byte）1：命令位
- （13Byte）2—14：数据位，自定义解析
- （1Byte）15：数据帧尾位（0x0d）

**数据传输方式**：

- 小端模式（数据的高字节保存在内存的高地址中，而数据的低字节保存在内存的低地址）

**注意事项：**

* 命令位0xf0-0xfe为测试命令，保留。

## 2.协议定义

### PC发送，stm32响应

#### a.云台控制

**绝对角度控制**

发送：

- （1Byte）1，命令位：0x11
- （4Byte）2-5，数据位：float32类型，代表pitch角度，向下为正，单位度。
- （4Byte）6-9，数据位：float32类型，代表yaw角度，逆时针为正，单位度。

返回：

- 无

### stm32发送，PC响应

#### b.模式切换

发送：

- （1Byte）1，命令位：0xa1
- （1Byte）2，数据位：uint8类型，代表模式类型，0x00代表正常模式，0x01代表自瞄模式。

返回：

- 无

